import{M as S}from"./Modal.d50e02d2.js";import{D as V}from"./Dropdown.cb957500.js";import{d as C,r as m,m as y,i as B,_ as N,c,a as _,w as g,b as e,F as U,e as $,f as D,o as p,g as M,t as v,h as b,v as A,p as T,j as H}from"./index.86a0ebf6.js";const j=C({components:{Modal:S,Dropdown:V},setup(){const t=B("datastore"),n=m([]);t.unit.getAllUnits().then(u=>{n.value=u});const s=m([]);t.item.getAllItems().then(u=>{s.value=u});const I=y(()=>n.value.map(u=>({value:u.id,text:u.name}))),w=y(()=>s.value.map(u=>{var a;return{code:u.code,name:u.name,unitName:(a=n.value.find(k=>k.id===u.unitID))==null?void 0:a.name,price:u.price}})),d=m({code:"",name:"",unitID:void 0,price:0}),i=m(!1),r=m("");function f(){d.value={code:"",name:"",unitID:void 0,price:0},r.value="\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32",i.value=!0}function o(u){d.value={...s.value[u]},r.value="\u0E41\u0E01\u0E49\u0E44\u0E02\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32",i.value=!0}function E(){const u=d.value;if(u.id&&(!u.code||u.code.length===0)){alert("code is empty");return}if(!u.name||u.name.length===0){alert("name is empty");return}if(u.price===void 0||u.price===null){alert("price is empty");return}if(!u.unitID){alert("unitID is empty");return}t==null||t.item.editItem(d.value).then(async()=>{s.value=await t.item.getAllItems(),i.value=!1}).catch(a=>alert(a))}function h(u){t==null||t.item.deleteItem(s.value[u].id).then(async()=>{const a=await t.item.getAllItems();selectedIndex.value=void 0,s.value=a}).catch(a=>alert(a))}return{unitOptions:I,itemTableData:w,formData:d,modalState:i,modalHeading:r,openAdd:f,openEdit:o,onSubmit:E,onDelete:h}}});const l=t=>(T("data-v-291a5ff4"),t=t(),H(),t),F=l(()=>e("h2",null,"\u0E15\u0E31\u0E49\u0E07\u0E04\u0E48\u0E32\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32",-1)),O=l(()=>e("thead",null,[e("tr",null,[e("th",{width:"5%"},"No."),e("th",{width:"15%"},"\u0E23\u0E2B\u0E31\u0E2A\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32"),e("th",null,"\u0E0A\u0E37\u0E48\u0E2D\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32"),e("th",{width:"10%"},"\u0E2B\u0E19\u0E48\u0E27\u0E22"),e("th",{class:"text-end"},"\u0E23\u0E32\u0E04\u0E32"),e("th",{class:"text-center",width:"20%"},"\u0E14\u0E33\u0E40\u0E19\u0E34\u0E19\u0E01\u0E32\u0E23")])],-1)),L={class:"text-center"},q=["onClick"],z=["onClick"],G={class:"row"},J={class:"col-md-6"},K=l(()=>e("label",null,"\u0E23\u0E2B\u0E31\u0E2A\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32",-1)),P=l(()=>e("br",null,null,-1)),Q=["value"],R={class:"col-md-6"},W=l(()=>e("label",null,"\u0E0A\u0E37\u0E48\u0E2D\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32",-1)),X=l(()=>e("br",null,null,-1)),Y={class:"row"},Z={class:"col-md-6"},x=l(()=>e("label",null,"\u0E23\u0E32\u0E04\u0E32",-1)),ee=l(()=>e("br",null,null,-1)),te={class:"col-md-6"},ue=l(()=>e("label",null,"\u0E2B\u0E19\u0E48\u0E27\u0E22",-1)),oe=l(()=>e("br",null,null,-1));function ne(t,n,s,I,w,d){const i=D("router-link"),r=D("Dropdown"),f=D("Modal");return p(),c("div",null,[_(i,{to:{name:"Home"}},{default:g(()=>[M("\u0E01\u0E25\u0E31\u0E1A")]),_:1}),F,e("button",{type:"button",class:"add-button",onClick:n[0]||(n[0]=(...o)=>t.openAdd&&t.openAdd(...o))},"\u0E40\u0E1E\u0E34\u0E48\u0E21"),e("table",null,[O,e("tbody",null,[(p(!0),c(U,null,$(t.itemTableData,(o,E)=>(p(),c("tr",{key:E},[e("td",null,v(E+1),1),e("td",null,v(o.code),1),e("td",null,v(o.name),1),e("td",null,v(o.unitName),1),e("td",null,v(o.price),1),e("td",L,[e("button",{onClick:h=>t.openEdit(E)},"\u0E41\u0E01\u0E49\u0E44\u0E02",8,q),e("button",{onClick:h=>t.onDelete(E)},"\u0E25\u0E1A",8,z)])]))),128))])]),_(f,{shown:t.modalState,"onUpdate:shown":n[5]||(n[5]=o=>t.modalState=o),heading:t.modalHeading,onSave:t.onSubmit},{body:g(()=>[e("div",G,[e("div",J,[K,P,t.formData.id?(p(),c("input",{key:0,disabled:"",value:t.formData.code},null,8,Q)):b((p(),c("input",{key:1,"onUpdate:modelValue":n[1]||(n[1]=o=>t.formData.code=o)},null,512)),[[A,t.formData.code]])]),e("div",R,[W,X,b(e("input",{"onUpdate:modelValue":n[2]||(n[2]=o=>t.formData.name=o),autocomplete:"off"},null,512),[[A,t.formData.name]])])]),e("div",Y,[e("div",Z,[x,ee,b(e("input",{type:"number","onUpdate:modelValue":n[3]||(n[3]=o=>t.formData.price=o)},null,512),[[A,t.formData.price]])]),e("div",te,[ue,oe,_(r,{modelValue:t.formData.unitID,"onUpdate:modelValue":n[4]||(n[4]=o=>t.formData.unitID=o),options:t.unitOptions},null,8,["modelValue","options"])])])]),_:1},8,["shown","heading","onSave"])])}const de=N(j,[["render",ne],["__scopeId","data-v-291a5ff4"]]);export{de as default};
