(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d4b8576"],{1090:function(t,e,n){},"408a":function(t,e,n){var u=n("e330");t.exports=u(1..valueOf)},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var u=n("e330"),c=n("1d80"),l=n("577e"),i=n("5899"),a=u("".replace),r="["+i+"]",o=RegExp("^"+r+r+"*"),b=RegExp(r+r+"*$"),d=function(t){return function(e){var n=l(c(e));return 1&t&&(n=a(n,o,"")),2&t&&(n=a(n,b,"")),n}};t.exports={start:d(1),end:d(2),trim:d(3)}},"711b":function(t,e,n){"use strict";var u=n("7a23"),c=["value"];function l(t,e,n,l,i,a){return Object(u["I"])((Object(u["s"])(),Object(u["e"])("select",{"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.selectedValue=e})},[(Object(u["s"])(!0),Object(u["e"])(u["a"],null,Object(u["y"])(t.options,(function(t,e){return Object(u["s"])(),Object(u["e"])("option",{key:e,value:t.value},Object(u["C"])(t.text),9,c)})),128))],512)),[[u["E"],t.selectedValue]])}var i=Object(u["i"])({props:{modelValue:{default:void 0},options:{type:Array,default:function(){return[]}}},setup:function(t,e){var n=e.emit,c=Object(u["b"])({get:function(){return t.modelValue},set:function(t){n("update:modelValue",t)}});return{selectedValue:c}}}),a=n("6b0d"),r=n.n(a);const o=r()(i,[["render",l]]);e["a"]=o},"8d74":function(t,e,n){"use strict";n.r(e);var u=n("7a23"),c=function(t){return Object(u["v"])("data-v-18ee4093"),t=t(),Object(u["t"])(),t},l=Object(u["g"])("กลับ"),i=c((function(){return Object(u["f"])("h2",null,"ออกใบเสร็จรับเงิน",-1)})),a=c((function(){return Object(u["f"])("div",{class:"row"},[Object(u["f"])("div",{class:"col-md-3"},[Object(u["f"])("label",null,"เลขที่เอกสาร"),Object(u["f"])("br"),Object(u["f"])("input",{type:"text",value:"TXXXX",disabled:""})])],-1)})),r={class:"row"},o={class:"col-md-3"},b=c((function(){return Object(u["f"])("label",null,"วันที่",-1)})),d=c((function(){return Object(u["f"])("br",null,null,-1)})),f=["value"],s={class:"table-detail"},O=c((function(){return Object(u["f"])("thead",null,[Object(u["f"])("tr",null,[Object(u["f"])("th",{width:"5%"},"No."),Object(u["f"])("th",{width:"15%"},"รหัสสินค้า"),Object(u["f"])("th",{width:"15%"},"ชื่อสินค้า"),Object(u["f"])("th",{width:"5%"},"หน่วย"),Object(u["f"])("th",{width:"5%"},"จำนวน"),Object(u["f"])("th",{width:"15%"},"ราคา"),Object(u["f"])("th",{width:"10%"},"ส่วนลด (%)"),Object(u["f"])("th",{width:"10%"},"ส่วนลด (บาท)"),Object(u["f"])("th",{width:"20%"},"รวมเงิน"),Object(u["f"])("th",{width:"5%"},"ดำเนินการ")])],-1)})),j={id:"tbody"},m=["onClick"],v=["onUpdate:modelValue"],p=["onUpdate:modelValue"],I={class:"text-center"},y=["onClick"],h=c((function(){return Object(u["f"])("td",null,null,-1)})),S=c((function(){return Object(u["f"])("td",null,null,-1)})),w=c((function(){return Object(u["f"])("td",null,[Object(u["f"])("input",{type:"number",disabled:"",value:0})],-1)})),N=c((function(){return Object(u["f"])("td",null,"0",-1)})),x=c((function(){return Object(u["f"])("td",null,[Object(u["f"])("input",{type:"number",disabled:"",value:0})],-1)})),g=c((function(){return Object(u["f"])("td",null,[Object(u["f"])("input",{type:"number",disabled:"",value:0})],-1)})),C=c((function(){return Object(u["f"])("td",null,"0",-1)})),D=c((function(){return Object(u["f"])("td",{class:"text-center"},[Object(u["f"])("button",{disabled:""},"ลบ")],-1)})),k={class:"summary"},A={class:"field"},q=c((function(){return Object(u["f"])("span",null,"ยอดรวมสินค้าก่อนส่วนลด",-1)})),E=["value"],M={class:"field"},V=c((function(){return Object(u["f"])("span",null,"ยอดรวมส่วนลดสินค้า",-1)})),P=["value"],T={class:"field"},U=c((function(){return Object(u["f"])("span",null,"Subtotal",-1)})),_=["value"],F={class:"field"},X=c((function(){return Object(u["f"])("span",null,"ส่วนลดการค้า",-1)})),G={class:"field"},R=c((function(){return Object(u["f"])("span",null,"Grand total",-1)})),H=["value"],B={class:"d-flex justify-content-end"};function L(t,e,n,c,L,J){var Y=Object(u["A"])("router-link"),$=Object(u["A"])("ModalSelectItem");return Object(u["s"])(),Object(u["e"])("div",null,[Object(u["h"])(Y,{to:{name:"Home"}},{default:Object(u["H"])((function(){return[l]})),_:1}),i,a,Object(u["f"])("div",r,[Object(u["f"])("div",o,[b,d,Object(u["f"])("input",{type:"text",value:t.todayText,disabled:""},null,8,f)])]),Object(u["f"])("table",s,[O,Object(u["f"])("tbody",j,[(Object(u["s"])(!0),Object(u["e"])(u["a"],null,Object(u["y"])(t.detailItems,(function(e,n){return Object(u["s"])(),Object(u["e"])("tr",{key:n},[Object(u["f"])("td",null,Object(u["C"])(n+1),1),Object(u["f"])("td",null,[Object(u["f"])("button",{onClick:function(e){return t.openModalSelectItem(n)}},Object(u["C"])(e.itemCode),9,m)]),Object(u["f"])("td",null,Object(u["C"])(e.itemName),1),Object(u["f"])("td",null,Object(u["C"])(e.itemUnitName),1),Object(u["f"])("td",null,[Object(u["I"])(Object(u["f"])("input",{type:"number","onUpdate:modelValue":function(t){return e.quantity=t}},null,8,v),[[u["F"],e.quantity]])]),Object(u["f"])("td",null,Object(u["C"])(e.itemPrice),1),Object(u["f"])("td",null,[Object(u["I"])(Object(u["f"])("input",{type:"number","onUpdate:modelValue":function(t){return e.discountPercentage=t}},null,8,p),[[u["F"],e.discountPercentage]])]),Object(u["f"])("td",null,Object(u["C"])(e.discountAmount),1),Object(u["f"])("td",null,Object(u["C"])(e.amount),1),Object(u["f"])("td",I,[Object(u["f"])("button",{onClick:function(e){return t.onDelete(n)}},"ลบ",8,y)])])})),128)),Object(u["f"])("tr",null,[Object(u["f"])("td",null,Object(u["C"])(t.detailItems.length+1),1),Object(u["f"])("td",null,[Object(u["f"])("button",{onClick:e[0]||(e[0]=function(e){return t.openModalSelectItem(null)})},"เลือกสินค้า")]),h,S,w,N,x,g,C,D])])]),Object(u["f"])("div",k,[Object(u["f"])("div",A,[q,Object(u["f"])("input",{disabled:"",value:t.subtotalBeforeDiscount},null,8,E)]),Object(u["f"])("div",M,[V,Object(u["f"])("input",{disabled:"",value:t.totalItemDiscount},null,8,P)]),Object(u["f"])("div",T,[U,Object(u["f"])("input",{disabled:"",value:t.subtotal},null,8,_)]),Object(u["f"])("div",F,[X,Object(u["I"])(Object(u["f"])("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=function(e){return t.tradeDiscount=e})},null,512),[[u["F"],t.tradeDiscount]])]),Object(u["f"])("div",G,[R,Object(u["f"])("input",{disabled:"",value:t.grandTotal},null,8,H)])]),Object(u["f"])("div",B,[Object(u["f"])("button",{onClick:e[2]||(e[2]=function(){return t.onSubmit&&t.onSubmit.apply(t,arguments)})},"บันทึก")]),Object(u["h"])($,{items:t.items,"request-num":t.modalSelectItem.requestNum,"initial-selected-id":t.modalSelectItem.initialSelectedID,onSelect:t.onSelectItem},null,8,["items","request-num","initial-selected-id","onSelect"])])}var J=n("c7eb"),Y=n("1da1"),$=n("b85c"),z=(n("7db0"),n("d3b7"),n("b0c0"),n("d81d"),n("a434"),n("714b")),K=n("711b"),Q=["onClick"],W=Object(u["f"])("hr",null,null,-1),Z={key:0},tt=Object(u["f"])("h3",null,"Item detail",-1),et=Object(u["f"])("b",null,"รหัสสินค้า",-1),nt=Object(u["f"])("br",null,null,-1),ut=Object(u["f"])("br",null,null,-1),ct=Object(u["f"])("br",null,null,-1),lt=Object(u["f"])("b",null,"ชื่อสินค้า",-1),it=Object(u["f"])("br",null,null,-1),at=Object(u["f"])("br",null,null,-1),rt=Object(u["f"])("br",null,null,-1),ot=Object(u["f"])("b",null,"ราคา",-1),bt=Object(u["f"])("br",null,null,-1),dt={key:1};function ft(t,e,n,c,l,i){var a=Object(u["A"])("Modal");return Object(u["s"])(),Object(u["d"])(a,{shown:t.modalState,"onUpdate:shown":e[2]||(e[2]=function(e){return t.modalState=e}),heading:"เลือกสินค้า"},{body:Object(u["H"])((function(){return[Object(u["f"])("ul",null,[(Object(u["s"])(!0),Object(u["e"])(u["a"],null,Object(u["y"])(t.items,(function(e,n){return Object(u["s"])(),Object(u["e"])("li",{key:n,onClick:function(e){return t.selectedIndex=n},class:Object(u["n"])({"text-primary":t.selectedIndex===n})},Object(u["C"])(e.name),11,Q)})),128))]),W,t.selectedItem?(Object(u["s"])(),Object(u["e"])("div",Z,[tt,et,nt,Object(u["g"])(" "+Object(u["C"])(t.selectedItem.code),1),ut,ct,lt,it,Object(u["g"])(" "+Object(u["C"])(t.selectedItem.name),1),at,rt,ot,bt,Object(u["g"])(" "+Object(u["C"])(t.selectedItem.price),1)])):(Object(u["s"])(),Object(u["e"])("p",dt,"No Item Selected"))]})),footer:Object(u["H"])((function(){return[Object(u["f"])("button",{type:"button",class:"btn btn-secondary",onClick:e[0]||(e[0]=function(e){return t.modalState=!1})},"Close"),Object(u["f"])("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=function(){return t.onSubmit&&t.onSubmit.apply(t,arguments)})},"Select this item")]})),_:1},8,["shown"])}n("a9e3"),n("c740");var st=Object(u["i"])({props:{requestNum:{type:Number,default:0},initialSelectedId:{type:Number,default:void 0},items:{type:Array,default:function(){return[]}}},components:{Modal:z["a"]},setup:function(t,e){var n=e.emit;Object(u["G"])((function(){return t.requestNum}),(function(t,e){t>e&&a()}));var c=Object(u["x"])(void 0),l=Object(u["b"])((function(){return t.items[c.value]})),i=Object(u["x"])(!1);function a(){i.value=!0,c.value=t.items.findIndex((function(e){return e.id===t.initialSelectedId}))}function r(){n("select",l.value.id),i.value=!1}return{modalState:i,selectedIndex:c,selectedItem:l,onSubmit:r}}}),Ot=n("6b0d"),jt=n.n(Ot);const mt=jt()(st,[["render",ft]]);var vt=mt,pt=n("1315"),It=Object(u["i"])({components:{Modal:z["a"],Dropdown:K["a"],ModalSelectItem:vt},setup:function(){var t=Object(u["l"])("datastore"),e=Object(u["x"])([]);t.unit.getAllUnits().then((function(t){e.value=t}));var n=Object(u["x"])([]);t.item.getAllItems().then((function(t){n.value=t}));var c=pt["DateTime"].now().set({hour:0,minute:0,second:0,millisecond:0}),l=Object(u["b"])((function(){return c.toFormat("dd/MM/yyyy")})),i=Object(u["x"])([]),a=Object(u["b"])((function(){var t,e=0,n=Object($["a"])(i.value);try{for(n.s();!(t=n.n()).done;){var u=t.value,c=u.itemPrice,l=u.quantity;e+=c*l}}catch(a){n.e(a)}finally{n.f()}return e})),r=Object(u["b"])((function(){var t,e=0,n=Object($["a"])(i.value);try{for(n.s();!(t=n.n()).done;){var u=t.value.discountAmount;e+=u}}catch(c){n.e(c)}finally{n.f()}return e})),o=Object(u["b"])((function(){return a.value-r.value})),b=Object(u["x"])(0),d=Object(u["b"])((function(){return Math.max(o.value-b.value,0)})),f=Object(u["w"])({requestNum:0,initialSelectedID:void 0,rowIndex:0});function s(t){f.rowIndex=t,f.initialSelectedID=t||0===t?i.value[t].itemID:void 0,f.requestNum++}function O(t){var c=n.value.find((function(e){return e.id===t})),l=Object(u["w"])({itemID:c.id,itemCode:c.code,itemName:c.name,itemUnitName:e.value.find((function(t){return t.id===c.unitID})).name,itemPrice:c.price,quantity:0,discountPercentage:0,discountAmount:Object(u["b"])((function(){return Math.min(l.discountPercentage/100,1)*(l.itemPrice*l.quantity)})),amount:Object(u["b"])((function(){return l.itemPrice*l.quantity-l.discountAmount}))});null!==f.rowIndex&&void 0!==f.rowIndex?i.value[f.rowIndex]=l:i.value.push(l)}function j(){var u,c=i.value,l=Object($["a"])(c);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(!f.quantity)return void alert("quantity is empty")}}catch(s){l.e(s)}finally{l.f()}t.receipt.addReceipt({details:c.map((function(t){var u;return{itemID:t.itemID,itemCode:t.itemCode,itemName:t.itemName,itemUnitName:null===(u=e.value.find((function(e){return e.id===n.value.find((function(e){return e.id===t.itemID})).unitID})))||void 0===u?void 0:u.name,itemPrice:t.itemPrice,quantity:t.quantity,discountAmount:t.discountAmount,discountPercentage:t.discountPercentage,amount:t.amount}})),subtotalBeforeDiscount:a.value,totalItemDiscount:r.value,subtotal:o.value,tradeDiscount:b.value,grandTotal:d.value}).then(Object(Y["a"])(Object(J["a"])().mark((function t(){return Object(J["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:i.value=[];case 1:case"end":return t.stop()}}),t)})))).catch((function(t){return alert(t)}))}function m(t){i.value.splice(t,1)}return{items:n,todayText:l,detailItems:i,subtotalBeforeDiscount:a,totalItemDiscount:r,subtotal:o,tradeDiscount:b,grandTotal:d,modalSelectItem:f,openModalSelectItem:s,onSelectItem:O,onSubmit:j,onDelete:m}}});n("ee35");const yt=jt()(It,[["render",L],["__scopeId","data-v-18ee4093"]]);e["default"]=yt},a9e3:function(t,e,n){"use strict";var u=n("83ab"),c=n("da84"),l=n("e330"),i=n("94ca"),a=n("cb2d"),r=n("1a2d"),o=n("7156"),b=n("3a9b"),d=n("d9b5"),f=n("c04e"),s=n("d039"),O=n("241c").f,j=n("06cf").f,m=n("9bf2").f,v=n("408a"),p=n("58a8").trim,I="Number",y=c[I],h=y.prototype,S=c.TypeError,w=l("".slice),N=l("".charCodeAt),x=function(t){var e=f(t,"number");return"bigint"==typeof e?e:g(e)},g=function(t){var e,n,u,c,l,i,a,r,o=f(t,"number");if(d(o))throw S("Cannot convert a Symbol value to a number");if("string"==typeof o&&o.length>2)if(o=p(o),e=N(o,0),43===e||45===e){if(n=N(o,2),88===n||120===n)return NaN}else if(48===e){switch(N(o,1)){case 66:case 98:u=2,c=49;break;case 79:case 111:u=8,c=55;break;default:return+o}for(l=w(o,2),i=l.length,a=0;a<i;a++)if(r=N(l,a),r<48||r>c)return NaN;return parseInt(l,u)}return+o};if(i(I,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var C,D=function(t){var e=arguments.length<1?0:y(x(t)),n=this;return b(h,n)&&s((function(){v(n)}))?o(Object(e),n,D):e},k=u?O(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),A=0;k.length>A;A++)r(y,C=k[A])&&!r(D,C)&&m(D,C,j(y,C));D.prototype=h,h.constructor=D,a(c,I,D,{constructor:!0})}},ee35:function(t,e,n){"use strict";n("1090")}}]);
//# sourceMappingURL=chunk-3d4b8576.b3e4ee09.js.map